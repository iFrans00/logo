import{e as q,h as G,i as J,j as O,f as W}from"./VTextField.92333350.js";import{b as X,f as Y,c as Z}from"./VInput.7a8e07c3.js";import{j as ee,af as le,ak as te,K as ne,n as c,$ as g,a3 as ae,b as n,z as y,F as h,aD as R,a5 as w,Q as oe}from"./index.c01ad529.js";import{V as ue}from"./VChip.bd27a61e.js";import{u as ie}from"./intersectionObserver.bdb09190.js";const me=ee({name:"VFileInput",inheritAttrs:!1,props:{chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,hint:String,persistentHint:Boolean,placeholder:String,showSize:{type:[Boolean,Number],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(e)},...X({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:e=>le(e).every(m=>m!=null&&typeof m=="object")},...q({clearable:!0})},emits:{"click:control":e=>!0,"update:modelValue":e=>!0},setup(e,m){let{attrs:A,emit:_,slots:a}=m;const{t:V}=te(),o=ne(e,"modelValue"),I=c(()=>typeof e.showSize!="boolean"?e.showSize:void 0),S=c(()=>{var l;return((l=o.value)!=null?l:[]).reduce((t,u)=>{let{size:d=0}=u;return t+d},0)}),b=c(()=>R(S.value,I.value)),C=c(()=>{var l;return((l=o.value)!=null?l:[]).map(t=>{const{name:u="",size:d=0}=t;return e.showSize?`${u} (${R(d,I.value)})`:u})}),j=c(()=>{var u;var l;const t=(u=(l=o.value)==null?void 0:l.length)!=null?u:0;return e.showSize?V(e.counterSizeString,t,b.value):V(e.counterString,t)}),z=g(),F=g(),r=g(!1),i=g(),D=c(()=>e.messages.length?e.messages:e.persistentHint?e.hint:"");function k(){if(i.value!==document.activeElement){var l;(l=i.value)==null||l.focus()}r.value||(r.value=!0)}function N(l){w(e["onClick:prepend"],l),P(l)}function P(l){var t;(t=i.value)==null||t.click(),_("click:control",l)}function x(l){l.stopPropagation(),k(),oe(()=>{o.value=[],i!=null&&i.value&&(i.value.value=""),w(e["onClick:clear"],l)})}return ie(()=>{const l=!!(a.counter||e.counter),t=!!(l||a.details),[u,d]=ae(A),[{modelValue:se,...E}]=Y(e),[H]=G(e);return n(Z,y({ref:z,modelValue:o.value,"onUpdate:modelValue":f=>o.value=f,class:"v-file-input","onClick:prepend":N,"onClick:append":e["onClick:append"]},u,E,{focused:r.value,messages:D.value}),{...a,default:f=>{let{isDisabled:p,isDirty:v,isReadonly:K,isValid:L}=f;return n(J,y({ref:F,"prepend-icon":e.prependIcon,"onClick:control":P,"onClick:clear":x,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},H,{active:v.value||r.value,dirty:v.value,focused:r.value,error:L.value===!1}),{...a,default:M=>{var $;let{props:{class:Q,...T}}=M;return n(h,null,[n("input",y({ref:i,type:"file",readonly:K.value,disabled:p.value,multiple:e.multiple,name:e.name,onClick:s=>{s.stopPropagation(),k()},onChange:s=>{var B;if(!s.target)return;const U=s.target;o.value=[...(B=U.files)!=null?B:[]]},onFocus:k,onBlur:()=>r.value=!1},T,d),null),n("div",{class:Q},[!!(($=o.value)!=null&&$.length)&&(a.selection?a.selection({fileNames:C.value,totalBytes:S.value,totalBytesReadable:b.value}):e.chips?C.value.map(s=>n(ue,{key:s,size:"small",color:e.color},{default:()=>[s]})):C.value.join(", "))])])}})},details:t?f=>{var p,v;return n(h,null,[(p=a.details)==null?void 0:p.call(a,f),l&&n(h,null,[n("span",null,null),n(O,{active:!!((v=o.value)!=null&&v.length),value:j.value},a.counter)])])}:void 0})}),W({},z,F,i)}});export{me as V};
